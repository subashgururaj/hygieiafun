{"version":3,"file":"angular-chartist.js","sources":["../src/angular-chartist.js"],"sourcesContent":["import angular from 'angular';\nimport Chartist from 'chartist';\n\nconst angularChartistModule = angular.module('angular-chartist', []);\n\nclass AngularChartistCtrl {\n  constructor($scope, $element) {\n    'ngInject';\n    this.data = $scope.data;\n    this.chartType = $scope.chartType;\n\n    this.events = $scope.events() || {};\n    this.options = $scope.chartOptions() || null;\n    this.responsiveOptions = $scope.responsiveOptions() || null;\n\n    this.element = $element[0];\n\n    this.renderChart();\n\n    $scope.$watch(\n      () => {\n        return {\n          data: $scope.data,\n          chartType: $scope.chartType,\n          chartOptions: $scope.chartOptions() || null,\n          responsiveOptions: $scope.responsiveOptions() || null,\n          events: $scope.events() || {}\n        };\n      },\n      this.update.bind(this),\n      true\n    );\n\n    $scope.$on('$destroy', () => {\n      if (this.chart) {\n        this.chart.detach();\n      }\n    });\n  }\n\n  bindEvents() {\n    Object.keys(this.events).forEach(eventName => {\n      this.chart.on(eventName, this.events[eventName]);\n    });\n  }\n\n  unbindEvents(events) {\n    Object.keys(events).forEach(eventName => {\n      this.chart.off(eventName, events[eventName]);\n    });\n  }\n\n  renderChart() {\n    // ensure that the chart does not get created without data\n    if (this.data) {\n      this.chart = Chartist[this.chartType](this.element, this.data, this.options, this.responsiveOptions);\n\n      this.bindEvents();\n\n      return this.chart;\n    }\n  }\n\n  update(newConfig, oldConfig) {\n    // Update controller with new configuration\n    this.chartType = newConfig.chartType;\n    this.data = newConfig.data;\n    this.options = newConfig.chartOptions;\n    this.responsiveOptions = newConfig.responsiveOptions;\n    this.events = newConfig.events;\n\n    // If chart type changed we need to recreate whole chart, otherwise we can update\n    if (!this.chart || newConfig.chartType !== oldConfig.chartType) {\n      this.renderChart();\n    } else {\n      if (!angular.equals(newConfig.events, oldConfig.events)) {\n        this.unbindEvents(oldConfig.events);\n        this.bindEvents();\n      }\n      this.chart.update(this.data, this.options);\n    }\n  }\n}\n\nangularChartistModule.controller('AngularChartistCtrl', AngularChartistCtrl).directive('chartist', function() {\n  'ngInject';\n  return {\n    restrict: 'EA',\n    scope: {\n      // mandatory\n      data: '=chartistData',\n      chartType: '@chartistChartType',\n      // optional\n      events: '&chartistEvents',\n      chartOptions: '&chartistChartOptions',\n      responsiveOptions: '&chartistResponsiveOptions'\n    },\n    controller: 'AngularChartistCtrl'\n  };\n});\n\nexport default angularChartistModule.name;\n"],"names":["angularChartistModule","angular","module","AngularChartistCtrl","$scope","$element","data","chartType","events","options","chartOptions","responsiveOptions","element","renderChart","$watch","this","update","bind","$on","_this","chart","detach","keys","forEach","on","eventName","_this2","off","Chartist","bindEvents","newConfig","oldConfig","equals","unbindEvents","controller","directive","name"],"mappings":"mhBAGA,IAAMA,EAAwBC,EAAQC,OAAO,mBAAoB,IAE3DC,wBACQC,EAAQC,oIAEbC,KAAOF,EAAOE,UACdC,UAAYH,EAAOG,eAEnBC,OAASJ,EAAOI,UAAY,QAC5BC,QAAUL,EAAOM,gBAAkB,UACnCC,kBAAoBP,EAAOO,qBAAuB,UAElDC,QAAUP,EAAS,QAEnBQ,gBAEEC,OACL,iBACS,MACCV,EAAOE,eACFF,EAAOG,uBACJH,EAAOM,gBAAkB,uBACpBN,EAAOO,qBAAuB,YACzCP,EAAOI,UAAY,KAG/BO,KAAKC,OAAOC,KAAKF,OACjB,KAGKG,IAAI,WAAY,WACjBC,EAAKC,SACFA,MAAMC,yHAMRC,KAAKP,KAAKP,QAAQe,QAAQ,cAC1BH,MAAMI,GAAGC,EAAWC,EAAKlB,OAAOiB,2CAI5BjB,qBACJc,KAAKd,GAAQe,QAAQ,cACrBH,MAAMO,IAAIF,EAAWjB,EAAOiB,+CAM/BV,KAAKT,iBACFc,MAAQQ,EAASb,KAAKR,WAAWQ,KAAKH,QAASG,KAAKT,KAAMS,KAAKN,QAASM,KAAKJ,wBAE7EkB,aAEEd,KAAKK,qCAITU,EAAWC,QAEXxB,UAAYuB,EAAUvB,eACtBD,KAAOwB,EAAUxB,UACjBG,QAAUqB,EAAUpB,kBACpBC,kBAAoBmB,EAAUnB,uBAC9BH,OAASsB,EAAUtB,OAGnBO,KAAKK,OAASU,EAAUvB,YAAcwB,EAAUxB,WAG9CN,EAAQ+B,OAAOF,EAAUtB,OAAQuB,EAAUvB,eACzCyB,aAAaF,EAAUvB,aACvBqB,mBAEFT,MAAMJ,OAAOD,KAAKT,KAAMS,KAAKN,eAN7BI,0DAWXb,EAAsBkC,WAAW,sBAAuB/B,GAAqBgC,UAAU,WAAY,4BAE1F,UACK,WACH,MAEC,0BACK,4BAEH,+BACM,0CACK,yCAET,yBAIDnC,EAAsBoC"}